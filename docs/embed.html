<!DOCTYPE html>
<html>
  <head>
    <title>Coda HTML Embed</title>
  </head>
  <body>
    <script>
      let urlParams = new URLSearchParams(window.location.search);

      let url = urlParams.get("url");
      let html = urlParams.get("html");
      if (url) {
        return embedUrl(url);
      }
      if (html) {
        return embedHtml(html);
      }
      throw new Error("Missing embed URL or HTML.");

      async function embedUrl(url) {
        let proxyUrl = "https://corsproxy.io/?" + encodeURIComponent(url);
        let response = await fetch(proxyUrl);
        let html = await response.text();
        embedHtml(html);
      }

      async function embedHtml(html) {
        document.open();
        document.write(html);
        document.close();
      }
    </script>
  </body>
</html>
